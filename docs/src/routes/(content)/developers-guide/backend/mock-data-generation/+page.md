# Mock data generation

> NB! This feature must only be used for local development and testing (not on production)

The database can be seeded with generated mock data using Faker.js.

If enabled, the data is generated by the rather messy [generateMockData](https://github.com/OpenVAA/voting-advice-application/blob/main/backend/vaa-strapi/src/functions/generateMockData.ts) function. See the implementation for details and constants you can edit in-code to control the amount of data.

Mock data can be seeded only once on initialising the backend DB or on each restart of the Strapi backend. Mock data generation is controlled by these `.env` variables:

```dotenv
# Set to true to enable mock data on an empty database
GENERATE_MOCK_DATA_ON_INITIALISE=true

# Used only in development builds
GENERATE_MOCK_DATA_ON_RESTART=false
```

To enable mock data generation, set the `GENERATE_MOCK_DATA_ON_INITIALISE` variable as true. This will create mock data if the database is empty or give a warning if database is not empty and thus mock data could not be generated.

You can also set `GENERATE_MOCK_DATA_ON_RESTART` as true. This will generate new mock data every time the Strapi instance is restarted.

**Please keep in mind that setting this variable as true will clear the database contents of existing candidates, parties, elections, and so on and should only be used for debugging purposes.**
Setting `GENERATE_MOCK_DATA_ON_RESTART` as true will override `GENERATE_MOCK_DATA_ON_INITIALISE` setting.

**Note:** you need to modify these variables in the relevant `.env` file (located either in the project's root directory or in `backend/vaa-strapi`) depending on how you choose to run the backend service locally.

### Mock users

By default, mock data includes the following Users (for up-to-date details, see [mockUsers](https://github.com/OpenVAA/voting-advice-application/blob/main/backend/vaa-strapi/src/functions/mockData/mockUsers.json)):

| User type   | User role     | Email                          | Password     | Remarks                       |
| ----------- | ------------- | ------------------------------ | ------------ | ----------------------------- |
| Candidate 1 | Authenticated | `mock.candidate@openvaa.org`   | `Password1!` | Use to test the Candidate App |
| Candidate 2 | Authenticated | `mock.candidate.2@openvaa.org` | `Password1!` | Use to test the Candidate App |
| Admin       | Admin         | `mock.admin@openvaa.org`       | `Password1!` | Use to test the Admin App     |

Note that the mock admin is different from the default Strapi Admin, generated along with mock data.

| User type    | Username | Email                    | Password | Remarks                |
| ------------ | -------- | ------------------------ | -------- | ---------------------- |
| Strapi Admin | `admin`  | `mock.admin@openvaa.org` | `admin`  | Use to login to Strapi |
