# Promptfoo E2E Chatbot Evaluation Configuration
# This config tests the full chatbot pipeline with real API calls
# Note: Provider is instantiated in chatbotEvaluation.ts and passed programmatically

defaultTest:
  options:
    provider: openai:chat:gpt-3.5-turbo

# Single test case with mixed fast and slow assertions
tests:
  - description: 'EU policy question triggers RAG retrieval and provides factual response'
    vars:
      query: "What is the EPP's stance on migration?"
    assert:
      # Fast assertions - deterministic checks
      - type: javascript
        value: output.length > 100

      - type: javascript
        value: metadata.category === 'eu2024_policy'

      - type: javascript
        value: metadata.usedRAG === true

      - type: latency
        threshold: 10000