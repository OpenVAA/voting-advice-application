{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "OpenVAA/voting-advice-application/settings-schema.json",
  "title": "Voting Advice Application settings",
  "description": "Settings for an OpenVAA-built voting advice application.",
  "type": "object",
  "additionalProperties": false,
  "required": ["$schema", "colors", "supportedLocales", "results"],
  "properties": {
    "$schema": {
      "const": "./settings-schema.json"
    },
    "admin": {
      "description": "Settings related to the administrative functions.",
      "type": "object",
      "additionalProperties": false,
      "required": ["email"],
      "properties": {
        "email": {
          "description": "The admin email of the application. When errors occur, users may be asked to contact this address.",
          "type": "string",
          "format": "idn-email",
          "default": "error@openvaa.org"
        }
      }
    },
    "appVersion": {
      "description": "Settings related to the version of the app and handling of saved user data.",
      "type": "object",
      "additionalProperties": false,
      "required": ["version", "requireUserDataVersion"],
      "properties": {
        "version": {
          "description": "The current version of the app.",
          "type": "integer",
          "default": 1
        },
        "requireUserDataVersion": {
          "description": "If the app version in which user data is last saved is smaller than this, the data will be reset.",
          "type": "integer",
          "default": 1
        }
      }
    },
    "colors": {
      "description": "The main DaisyUI colors used by the application. These have to be defined separately for both the light (default) and dark themes. Only some of the named colors are used in the application: e.g., 'warning' is also used for 'error'.",
      "type": "object",
      "required": ["light", "dark"],
      "additionalProperties": false,
      "patternProperties": {
        "^light|dark$": {
          "description": "The colors for the theme",
          "type": "object",
          "required": [
            "primary",
            "secondary",
            "accent",
            "neutral",
            "base-100",
            "base-200",
            "base-300",
            "warning",
            "line-color"
          ],
          "additionalProperties": false,
          "patternProperties": {
            "^primary|secondary|accent|neutral|base-100|base-200|base-300|warning|line-color$": {
              "description": "The color value as a hex string or an rgb string",
              "type": "string",
              "pattern": "^(?:#(?:[0-9a-fA-F]{3}){1,2}|rgb\\( *\\d{1,3} *, *\\d{1,3} *, *\\d{1,3} *\\))$"
            }
          }
        }
      }
    },
    "font": {
      "description": "The main font used in the application. Fallback sans-serif and emoji fonts will be added automatically.",
      "type": "object",
      "additionalProperties": false,
      "required": ["name", "url"],
      "properties": {
        "name": {
          "description": "The name of the font. Be sure to escape any spaces or enclose the name in quotes. You must also supply the url property.",
          "type": "string"
        },
        "url": {
          "description": "The download url of the font. This will be added to the <link> tag in the <head> section of the HTML.",
          "type": "string"
        },
        "style": {
          "description": "The style of the font, i.e. 'sans' (the default) or 'serif', which will decide the fallback fonts to use.",
          "enum": ["sans", "serif"]
        }
      }
    },
    "supportedLocales": {
      "description": "A list of the locales supported by the application.",
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "type": "object",
        "required": ["code", "name"],
        "additionalProperties": false,
        "properties": {
          "code": {
            "description": "The ISO 639 locale code, e.g, 'en' or 'es-CO'.",
            "type": "string"
          },
          "name": {
            "description": "The name of the language in the language itself, e.g. 'English' for locale 'en' or 'Suomi' for locale 'fi'.",
            "type": "string"
          },
          "isDefault": {
            "description": "Whether the language is the default language for the application. Only mark one language as the default language for the application.",
            "type": "boolean"
          }
        }
      }
    },
    "header": {
      "description": "Settings related to the app header.",
      "type": "object",
      "additionalProperties": false,
      "required": ["showHelp"],
      "properties": {
        "showHelp": {
          "description": "Whether to show the help icon by default in the header.",
          "type": "boolean",
          "default": true
        }
      }
    },
    "questions": {
      "description": "Settings related to the question view.",
      "type": "object",
      "additionalProperties": false,
      "required": ["showCategoryTags", "showIntroPage"],
      "properties": {
        "showCategoryTags": {
          "description": "Whether to show the category tag along the question text.",
          "type": "boolean",
          "default": true
        },
        "showIntroPage": {
          "description": "Whether to show the questions intro page before going to questions.",
          "type": "boolean",
          "default": true
        },
        "showResultsLink": {
          "description": "Whether to the link to results in the header when answering questions if enough answers are provided.",
          "type": "boolean",
          "default": true
        }
      }
    },
    "results": {
      "description": "Settings related to the results view.",
      "type": "object",
      "additionalProperties": false,
      "required": ["minimumAnswers", "sections", "showSubmatches"],
      "properties": {
        "minimumAnswers": {
          "showCategoryTags": {
            "description": "The minimum number of voter answers needed before matching results are available.",
            "type": "integer",
            "default": 1
          }
        },
        "sections": {
          "description": "Which entity types to show in the results view. There must be at least one.",
          "type": "array",
          "minItems": 1,
          "uniqueItems": true,
          "items": {
            "enum": ["candidate", "party"]
          }
        },
        "showSubmatches": {
          "description": "Whether to show (and compute) submatches for question categories for the entities. If there's only one category, submatches are never computed.",
          "type": "boolean",
          "default": true
        }
      }
    }
  }
}
